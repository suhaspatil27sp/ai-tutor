# AI Tutor Chat - Production Frontend

A modern, production-ready web frontend for an AI-powered tutoring chatbot targeting students in grades 6-12 (ages 11-18).

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Icons**: Lucide React
- **Deployment**: Vercel

## Features

- ✅ User onboarding with grade-level customization
- ✅ Real-time chat with AI tutor
- ✅ Session management with 1.5-hour timeout
- ✅ Optimistic UI updates
- ✅ Message retry mechanism
- ✅ Auto-resizing textarea
- ✅ Mobile-first responsive design
- ✅ Chrome autofill compatible
- ✅ Connection status monitoring

## Project Structure

```
ai-tutor/
├── src/
│   ├── app/
│   │   ├── api/
│   │   │   ├── chat/route.ts
│   │   │   ├── health/route.ts
│   │   │   ├── session/
│   │   │   │   ├── route.ts
│   │   │   │   └── [id]/route.ts
│   │   │   └── user/route.ts
│   │   ├── globals.css
│   │   ├── layout.tsx
│   │   └── page.tsx
│   ├── components/
│   │   ├── AITutor.tsx
│   │   └── Onboarding.tsx
│   ├── lib/
│   │   └── supabase.ts
│   └── types/
│       └── index.ts
├── .env.example
├── .eslintrc.json
├── .gitignore
├── next.config.js
├── package.json
├── postcss.config.js
├── tailwind.config.js
├── tsconfig.json
└── vercel.json
```

## Setup Instructions

### 1. Clone and Install

```bash
git clone <your-repo-url>
cd ai-tutor
npm install
```

### 2. Configure Supabase

1. Create a project at [supabase.com](https://supabase.com)
2. Run the SQL schema from `users, sessions, messages.txt` in your Supabase SQL editor
3. Get your project credentials from Project Settings > API

### 3. Environment Variables

Create a `.env.local` file:

```bash
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
```

### 4. Run Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## Deployment to Vercel

### Via GitHub

1. Push your code to GitHub
2. Import project in Vercel dashboard
3. Add environment variables in Vercel project settings
4. Deploy

### Via Vercel CLI

```bash
npm install -g vercel
vercel
```

## Environment Variables on Vercel

Add these in Project Settings > Environment Variables:

- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_SERVICE_ROLE_KEY`

## API Routes

### User Management
- `POST /api/user` - Create new user
- `GET /api/user?user_id={id}` - Get user details
- `PATCH /api/user` - Update user

### Session Management
- `POST /api/session` - Create new session
- `GET /api/session?user_id={id}` - Get active session
- `PATCH /api/session/[id]` - Update session
- `DELETE /api/session/[id]` - End session

### Chat
- `POST /api/chat` - Send message and get bot response
- `GET /api/chat?session_id={id}` - Get conversation history

### Health Check
- `GET /api/health` - Check API and database status

## Supabase Integration Notes

- Uses `@supabase/supabase-js` client library
- All IDs (user_id, session_id, message_id) are generated by Supabase
- Row Level Security (RLS) can be enabled as needed
- Direct Supabase queries (no custom methods)

## Chrome Autofill Compatibility

The CSS includes specific handling for Chrome autofill to prevent:
- Yellow background color issues
- Unreadable text color combinations
- Proper dark mode support

## Bot Response Integration

Currently uses placeholder responses. To integrate actual AI:

1. Replace `generateBotResponse()` in `/api/chat/route.ts`
2. Add n8n webhook or Claude API integration
3. Update bot response logic

## Browser Support

- Chrome/Edge (latest 2 versions)
- Firefox (latest 2 versions)
- Safari (latest 2 versions)
- Mobile browsers (iOS Safari, Chrome Mobile)

## Performance Optimizations

- Server-side rendering with Next.js App Router
- Automatic code splitting
- Image optimization
- Compression enabled
- Security headers configured

## License

MIT